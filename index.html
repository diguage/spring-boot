<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<meta content="IE=edge" http-equiv="X-UA-Compatible">
<meta content="width=device-width,initial-scale=1" name="viewport">
<meta content="Asciidoctor 2.0.23" name="generator">
<meta content="Dç“œå“¥" name="author">
<title>Spring Boot æºç åˆ†æAlpha</title>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700" rel="stylesheet">
<link href="css/asciidoctor.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link href="css/rouge-github.css" rel="stylesheet">
</head>
<body class="toc2 book toc-left">
<div id="header">
<h1>Spring Boot æºç åˆ†æ<sup>Alpha</sup></h1>
<div class="details">
<span class="author" id="author">Dç“œå“¥</span><br>
<span class="email" id="email"><a href="https://www.diguage.com" class="bare">https://www.diguage.com</a></span><br>
<span id="revnumber">version 3.5.0-SNAPSHOT</span>
</div>
<div class="toc2" id="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#å‰è¨€">å‰è¨€</a>
<ul class="sectlevel2">
<li><a href="#å‹æƒ…æ”¯æŒ">å‹æƒ…æ”¯æŒ</a></li>
<li><a href="#å®˜ç½‘åŠç‰ˆæœ¬åº“">å®˜ç½‘åŠç‰ˆæœ¬åº“</a></li>
</ul>
</li>
<li><a href="#spring-boot-é‡ç‚¹">1. Spring Boot é‡ç‚¹</a></li>
<li><a href="#å¯åŠ¨æµç¨‹">2. å¯åŠ¨æµç¨‹</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="anchor"></a>å‰è¨€</h2>
<div class="sectionbody">
<div class="paragraph">
<p>æœ¬æ–‡æ¡£æ˜¯ Dç“œå“¥ é˜…è¯» Spring Boot æºç ä»¥åŠç›¸å…³æ–‡æ¡£æ—¶çš„ç¬”è®°ã€‚å¯¹å­¦ä¹ å†…å®¹åšä¸€äº›æ€»ç»“å’Œæç‚¼ï¼Œåˆ†äº«å‡ºæ¥ä¹Ÿæ–¹ä¾¿å¤§å®¶ä¸€èµ·å­¦ä¹ ï¼Œå…±åŒè¿›æ­¥ã€‚</p>
</div>
<div class="sect2">
<h3 id="å‹æƒ…æ”¯æŒ"><a href="#å‹æƒ…æ”¯æŒ" class="anchor"></a>å‹æƒ…æ”¯æŒ</h3>
<div class="paragraph">
<p>å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªç¬”è®°å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ï¼Œçœ‹åœ¨Dç“œå“¥ç å­—çš„è¾›è‹¦ä¸Šï¼Œè¯·å‹æƒ…æ”¯æŒä¸€ä¸‹ï¼ŒDç“œå“¥æ„Ÿæ¿€ä¸å°½ï¼ŒğŸ˜œ</p>
</div>
<table class="tableblock frame-none grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img alt="æ”¯ä»˜å®" src="images/alipay.png" width="95%" title="æ”¯ä»˜å®"></span></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><span class="image"><img alt="å¾®ä¿¡" src="images/wxpay.png" width="95%" title="å¾®ä¿¡"></span></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>æœ‰äº›æ‰“èµçš„æœ‹å‹å¸Œæœ›å¯ä»¥åŠ ä¸ªå¥½å‹ï¼Œæ¬¢è¿å…³æ³¨Dç“œå“¥çš„å¾®ä¿¡å…¬ä¼—å·ï¼Œè¿™æ ·å°±å¯ä»¥é€šè¿‡å…¬ä¼—å·çš„å›å¤ç›´æ¥ç»™æˆ‘å‘ä¿¡æ¯ã€‚</p>
</div>
<div class="paragraph">
<p><span class="image"><img alt="wx jikerizhi" src="images/wx-jikerizhi.png" width="98%"></span></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong>å…¬ä¼—å·çš„å¾®ä¿¡å·æ˜¯: jikerizhi ï¼ˆâ€œæå®¢æ—¥å¿—â€å…¨æ‹¼ï¼‰</strong>ã€‚<em>å› ä¸ºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œæœ‰æ—¶å›¾ç‰‡åŠ è½½ä¸å‡ºæ¥ã€‚å¦‚æœå›¾ç‰‡åŠ è½½ä¸å‡ºæ¥å¯ä»¥ç›´æ¥é€šè¿‡æœç´¢å¾®ä¿¡å·æ¥æŸ¥æ‰¾æˆ‘çš„å…¬ä¼—å·ã€‚</em>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="å®˜ç½‘åŠç‰ˆæœ¬åº“"><a href="#å®˜ç½‘åŠç‰ˆæœ¬åº“" class="anchor"></a>å®˜ç½‘åŠç‰ˆæœ¬åº“</h3>
<div class="paragraph">
<p>æœ¬æ–‡æ¡£çš„ç‰ˆæœ¬åº“æ‰˜ç®¡åœ¨ Github ä¸Šï¼Œå¦å¤–å•ç‹¬å‘å¸ƒã€‚</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">â€œåœ°ç“œå“¥â€åšå®¢ç½‘</dt>
<dd>
<p><a href="https://www.diguage.com/" class="bare" rel="noopener" target="_blank">https://www.diguage.com/</a> ã€‚Dç“œå“¥çš„ä¸ªäººåšå®¢ã€‚æ¬¢è¿å…‰ä¸´ï¼Œä¸è¿‡ï¼Œå†…å®¹å¾ˆæ‚ä¹±ï¼Œè¯·è§è°…ã€‚ä¸è§è°…ï¼Œä½ æ¥æ‰“æˆ‘å•Šï¼ŒğŸ˜‚ğŸ˜‚</p>
</dd>
<dt class="hdlist1">æœ¬æ–‡æ¡£å®˜ç½‘</dt>
<dd>
<p><a href="https://diguage.github.io/spring-boot/" class="bare" rel="noopener" target="_blank">https://diguage.github.io/spring-boot/</a> ã€‚ä¸ºäº†æ–¹ä¾¿é˜…è¯»ï¼Œè¿™é‡Œå±•ç¤ºäº†å¤„ç†å¥½çš„æ–‡æ¡£ã€‚é˜…è¯»è¯·ç‚¹å‡»è¿™ä¸ªç½‘å€ã€‚</p>
</dd>
<dt class="hdlist1">æœ¬æ–‡æ¡£ç‰ˆæœ¬åº“</dt>
<dd>
<p><a href="https://github.com/diguage/spring-boot" class="bare" rel="noopener" target="_blank">https://github.com/diguage/spring-boot</a> ã€‚ç”±äºç»„ç»‡æ–¹å¼çš„ç‰¹æ®Šæ€§ï¼Œå¦ç™½è®²ï¼Œä¸å»ºè®®å¤§å®¶å‘ PRã€‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿å‘ Issue è®¨è®ºã€‚</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-boot-é‡ç‚¹"><a href="#spring-boot-é‡ç‚¹" class="anchor"></a>1. Spring Boot é‡ç‚¹</h2>
<div class="sectionbody">
<div class="arabic olist">
<ol class="arabic">
<li>
<p>é›¶é…ç½®</p>
</li>
<li>
<p>å¯åŠ¨æµç¨‹ã€‚é‡ç‚¹åˆ©ç”¨äº† Spring çš„ <code>ApplicationEvent</code> è®¢é˜…/å‘å¸ƒæ¨¡å¼ã€‚</p>
</li>
<li>
<p>è‡ªåŠ¨é…ç½®</p>
</li>
<li>
<p>è¿ç»´</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="å¯åŠ¨æµç¨‹"><a href="#å¯åŠ¨æµç¨‹" class="anchor"></a>2. å¯åŠ¨æµç¨‹</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap rouge"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="gl linenos"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
</pre></td><td class="code"><pre><span class="kn">package</span> <span class="nn">com.diguage.truman</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.slf4j.Logger</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.slf4j.LoggerFactory</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">org.springframework.boot.CommandLineRunner</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.SpringApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.autoconfigure.SpringBootApplication</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.context.properties.EnableConfigurationProperties</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>

<span class="cm">/**
 * Truman åº”ç”¨
 *
 * @author Dç“œå“¥ Â· https://www.diguage.com
 * @since 2021-08-04 08:50:57
 */</span>
<span class="nd">@Configuration</span>
<span class="nd">@EnableConfigurationProperties</span>
<span class="nd">@SpringBootApplication</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TrumanApplication</span> <span class="kd">implements</span> <span class="nc">CommandLineRunner</span> <span class="o">{</span>
	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">Logger</span> <span class="n">logger</span> <span class="o">=</span> <span class="nc">LoggerFactory</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="nc">TrumanApplication</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">SpringApplication</span><span class="o">.</span><span class="na">run</span><span class="o">(</span><span class="nc">TrumanApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="n">args</span><span class="o">);</span>
	<span class="o">}</span>

	<span class="nd">@Override</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">(</span><span class="nc">String</span><span class="o">...</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
		<span class="n">logger</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"Startâ€¦â€¦"</span><span class="o">);</span>
	<span class="o">}</span>

<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<img alt="Diagram" src="SpringApplication-run.svg" width="98%" height="4112">
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight nowrap rouge"><code data-lang="java"><table class="linenotable"><tbody><tr><td class="gl linenos"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
</pre></td><td class="code"><pre><span class="kn">package</span> <span class="nn">com.diguage.truman</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">lombok.extern.slf4j.Slf4j</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.Test</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.junit.jupiter.api.extension.ExtendWith</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.boot.test.context.SpringBootTest</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.test.context.bean.override.mockito.MockitoBean</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.test.context.junit.jupiter.SpringExtension</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">assertj</span><span class="o">.</span><span class="na">core</span><span class="o">.</span><span class="na">api</span><span class="o">.</span><span class="na">Assertions</span><span class="o">.</span><span class="na">assertThat</span><span class="o">;</span>

<span class="cm">/**
 * MockBean æµ‹è¯•
 *
 * @author Dç“œå“¥ Â· https://www.diguage.com
 * @since 2021-08-04 08:50:57
 */</span>
<span class="nd">@Slf4j</span>
<span class="nd">@SpringBootTest</span><span class="o">(</span><span class="n">classes</span> <span class="o">=</span> <span class="nc">TrumanApplication</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="nd">@ExtendWith</span><span class="o">(</span><span class="nc">SpringExtension</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">MockBeanTest</span> <span class="o">{</span>

	<span class="nd">@MockitoBean</span>
	<span class="kd">private</span> <span class="nc">Runnable</span> <span class="n">run</span><span class="o">;</span>

	<span class="nd">@Test</span>
	<span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">run</span><span class="o">).</span><span class="na">isNotNull</span><span class="o">();</span>
		<span class="n">assertThat</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">run</span><span class="o">).</span><span class="na">isInstanceOf</span><span class="o">(</span><span class="nc">Runnable</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
		<span class="c1">// org.mockito.codegen.Runnable$MockitoMock$XXXXX</span>
		<span class="c1">// ä»è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼ŒMockBean æ˜¯ç”± Mockito åˆ›å»ºçš„ Mockã€‚</span>
		<span class="c1">// åº•å±‚æ˜¯ Byte Buddy åˆ©ç”¨å­—èŠ‚ç ç¼–è¾‘æŠ€æœ¯åŠ¨æ€ç”Ÿæˆçš„ç±»ã€‚</span>
		<span class="n">log</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="s">"class={}"</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">run</span><span class="o">.</span><span class="na">getClass</span><span class="o">().</span><span class="na">getName</span><span class="o">());</span>
	<span class="o">}</span>

<span class="o">}</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.5.0-SNAPSHOT<br>
Last updated 2025-03-03 12:03:59 UTC
</div>
</div>
</body>
</html>